import{a as ge,r as d,A as ve,j as e,B as V,f as B,C as b,J as te,m as W,l as je,t as _}from"./index-Pe1Nv6hH.js";import{u as re}from"./useQuery-DDON36P9.js";import{u as se}from"./useMutation-uvHqRPk1.js";import{P as ye,T as De,u as Ne,g as be,c as Se,b as Ce}from"./react-icons.esm-CiMB90YA.js";import{S as Ie}from"./index-BmISbovJ.js";import{I as $}from"./input-DW-mBlUw.js";import{B as Te}from"./badge-T19Q3klL.js";import{g as we}from"./status-variants-Dh7YK7JP.js";import{D as q,T as _e,a as Ve,b as k,c as Fe,d as Pe,e as H}from"./column-header-Cfszq_dp.js";import{D as Re}from"./pagination-B86K5cVv.js";import{D as Ee}from"./faceted-filter-BDTVtMjs.js";import{T as ne,v as le,w as ce}from"./sidebar-BFSPGCEL.js";import{S as Q,a as G,b as U,c as J,d as S}from"./select-Dl4KSF7A.js";import{g as Le}from"./service-C5Ec2Sbd.js";import{C as Me}from"./confirm-dialog-DmDS_GmK.js";import{u as qe,a as ke,h as ze,F as Oe,b as m,c as p,d as g,e as x,f as h}from"./form-DU65aaqX.js";import{D as Ke,a as Ae,b as Be,c as He,d as $e,e as Qe}from"./dialog-DHifiqsD.js";import{T as de}from"./textarea-D-N386t0.js";import{P as Ge,a as Ue,b as Je}from"./popover-CrxLZKyN.js";import{g as We,a as Ye,b as Xe,c as Ze,d as et,e as tt}from"./command-D9eDedTW.js";import{R as ue}from"./index-B79q5nRO.js";import{g as st}from"./post-BNqlxPPd.js";import{C as rt}from"./chevrons-up-down-BrdDDp5G.js";import{C as at}from"./index-SpxnGYUf.js";import{I as it}from"./image-D4KB7jNL.js";import{V as me}from"./video-Bs8fCpLF.js";import{F as pe}from"./resource-u0oZDgOZ.js";import"./dropdown-menu-CbU9G1H2.js";import"./index-4GH7Kv3S.js";import"./createLucideIcon-BU8aI1FG.js";import"./index-C8jai3VV.js";import"./index-D68Ta3NN.js";import"./index-BDzuQ5ZL.js";import"./chevron-right-COcvBQ44.js";import"./separator-Bq1fgMtF.js";import"./index-DGhUbGt9.js";import"./search-DNOmmJ4K.js";import"./scroll-area-BCr0FWtA.js";import"./loader-circle-DjNfctPA.js";import"./upload-CE8x_1SM.js";import"./chevron-left-BrCT33MH.js";const ot=t=>ve({title:b().min(1,t("features.operation.advertising.form.validation.titleRequired")),description:b().min(1,t("features.operation.advertising.form.validation.descriptionRequired")),sceneID:b().min(1,t("features.operation.advertising.form.validation.sceneRequired")),status:te().optional(),urlType:te().min(1).max(2),image:b().optional(),video:b().optional(),ext:b().optional(),sort:te().min(1,t("features.operation.advertising.form.validation.sortRequired")),url:b().optional(),postID:b().optional()}).refine(c=>c.urlType===1?c.url&&c.url.trim().length>0:c.urlType===2?c.postID&&c.postID.trim().length>0:!0,{message:t("features.operation.advertising.form.validation.urlOrPostRequired"),path:["url"]});function nt({open:t,onOpenChange:c,onSubmit:y,onSubmitUpdate:v,isLoading:D=!1,sceneList:C,editAd:l}){const{t:a}=ge(),j=!!l,[Y,I]=d.useState(!1),[X,f]=d.useState(!1),[z,O]=d.useState(!1),[F,P]=d.useState(""),Z=d.useMemo(()=>ot(a),[a]),n=qe({resolver:ke(Z),defaultValues:{title:"",description:"",sceneID:"",status:1,urlType:1,image:"",video:"",ext:"",sort:1,url:"",postID:""}}),R=ze({control:n.control,name:"urlType"}),{data:E,isLoading:K}=re({queryKey:["postList",{title:F,page_num:1,page_size:100}],queryFn:()=>st({title:F||void 0,pageNum:1,pageSize:100}),enabled:z&&R===2}),L=d.useMemo(()=>E?.posts??[],[E?.posts]);d.useEffect(()=>{if(t)if(l){const r=l.urlType??1;n.reset({title:(l.title??"").trim(),description:(l.description??"").trim(),sceneID:(l.sceneID??"").trim(),status:l.status??1,urlType:r,image:(l.image??"").trim(),video:(l.video??"").trim(),ext:(l.ext??"").trim(),sort:l.sort??1,url:r===1?(l.url??"").trim():"",postID:r===2?(l.url??"").trim():""})}else n.reset({title:"",description:"",sceneID:"",status:1,urlType:1,image:"",video:"",ext:"",sort:1,url:"",postID:""})},[t,l,n]);function ee(r){const o=r.urlType===1?r.url?.trim():void 0,T=r.urlType===2?r.postID?.trim():void 0;if(j&&l&&v)v(l.adID?.trim()??"",{title:r.title.trim(),description:r.description.trim(),sceneID:(r.sceneID??"").trim()||void 0,status:r.status,urlType:r.urlType,image:(r.image??"").trim()||void 0,video:(r.video??"").trim()||void 0,ext:(r.ext??"").trim()||void 0,sort:r.sort,url:o||T||void 0});else if(y){const u=(r.sceneID??"").trim();y({title:r.title.trim(),description:r.description.trim(),sceneID:u,status:r.status??1,urlType:r.urlType,image:(r.image??"").trim()||void 0,video:(r.video??"").trim()||void 0,ext:(r.ext??"").trim()||void 0,sort:r.sort,url:o||T||void 0})}}return e.jsxs(Ke,{open:t,onOpenChange:c,children:[e.jsxs(Ae,{className:"sm:max-w-[600px] max-h-[90vh] flex flex-col",children:[e.jsxs(Be,{className:"shrink-0",children:[e.jsx(He,{children:a(j?"features.operation.advertising.form.editTitle":"features.operation.advertising.form.dialogTitle")}),e.jsx($e,{children:a(j?"features.operation.advertising.form.editDescription":"features.operation.advertising.form.createDescription")})]}),e.jsx(Oe,{...n,children:e.jsxs("form",{onSubmit:n.handleSubmit(ee),className:"flex-1 overflow-y-auto pr-2 space-y-4 min-h-0",children:[e.jsx(m,{control:n.control,name:"title",render:({field:r})=>e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-center gap-4 space-y-0",children:[e.jsx(g,{className:"text-right",children:a("features.operation.advertising.form.title")}),e.jsx(x,{children:e.jsx($,{placeholder:a("features.operation.advertising.form.titlePlaceholder"),...r})}),e.jsx(h,{className:"col-start-2"})]})}),e.jsx(m,{control:n.control,name:"description",render:({field:r})=>e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-start gap-4 space-y-0",children:[e.jsx(g,{className:"text-right pt-2",children:a("features.operation.advertising.form.description")}),e.jsx(x,{children:e.jsx(de,{placeholder:a("features.operation.advertising.form.descriptionPlaceholder"),className:"min-h-[80px] resize-none",...r})}),e.jsx(h,{className:"col-start-2"})]})}),e.jsx(m,{control:n.control,name:"sceneID",render:({field:r})=>{const T=(r.value??"").trim()||"__empty__";return e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-center gap-4 space-y-0",children:[e.jsx(g,{className:"text-right",children:a("features.operation.advertising.form.scene")}),e.jsxs(Q,{value:T,onValueChange:u=>r.onChange(u==="__empty__"?"":u),children:[e.jsx(x,{children:e.jsx(G,{children:e.jsx(U,{placeholder:a("features.operation.advertising.form.scenePlaceholder")})})}),e.jsxs(J,{children:[e.jsx(S,{value:"__empty__",children:a("features.operation.advertising.form.scenePlaceholder")}),C.filter(u=>(u.adSceneID??"").trim()!=="").map(u=>e.jsx(S,{value:(u.adSceneID??"").trim(),children:u.title},u.adSceneID))]})]},`scene-${l?.adID??"create"}-${C.length}-${T}`),e.jsx(h,{className:"col-start-2"})]})}}),e.jsx(m,{control:n.control,name:"urlType",render:({field:r})=>e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-center gap-4 space-y-0",children:[e.jsx(g,{className:"text-right",children:a("features.operation.advertising.form.urlType.label")}),e.jsx(x,{children:e.jsxs(Q,{onValueChange:o=>{r.onChange(Number(o)),n.setValue("url",""),n.setValue("postID","")},value:String(r.value??1),children:[e.jsx(G,{children:e.jsx(U,{})}),e.jsxs(J,{children:[e.jsx(S,{value:"1",children:a("features.operation.advertising.form.urlType.link")}),e.jsx(S,{value:"2",children:a("features.operation.advertising.form.urlType.article")})]})]})}),e.jsx(h,{className:"col-start-2"})]})}),R===1?e.jsx(m,{control:n.control,name:"url",render:({field:r})=>e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-center gap-4 space-y-0",children:[e.jsx(g,{className:"text-right",children:a("features.operation.advertising.form.url")}),e.jsx(x,{children:e.jsx($,{placeholder:a("features.operation.advertising.form.urlPlaceholder"),...r})}),e.jsx(h,{className:"col-start-2"})]})}):e.jsx(m,{control:n.control,name:"postID",render:({field:r})=>e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-center gap-4 space-y-0",children:[e.jsx(g,{className:"text-right",children:a("features.operation.advertising.form.article")}),e.jsxs(Ge,{open:z,onOpenChange:o=>{O(o),o||P("")},children:[e.jsx(Ue,{asChild:!0,children:e.jsx(x,{children:e.jsxs(V,{variant:"outline",role:"combobox",className:B("w-full justify-between",!r.value&&"text-muted-foreground"),children:[r.value&&L.find(o=>o.postID===r.value)?.title||a("features.operation.advertising.form.selectArticle"),e.jsx(rt,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),e.jsx(Je,{className:"w-[400px] p-0",align:"start",children:e.jsxs(We,{shouldFilter:!1,children:[e.jsx(Ye,{placeholder:a("features.operation.advertising.form.searchArticle"),value:F,onValueChange:o=>{P(o)}}),e.jsx(Xe,{children:K?e.jsx("div",{className:"py-6 text-center text-sm text-muted-foreground",children:a("features.operation.advertising.form.loadingArticles")}):L.length===0?e.jsx(Ze,{children:a("features.operation.advertising.form.noArticles")}):e.jsx(et,{children:L.map(o=>e.jsxs(tt,{value:`${o.postID}-${o.title}`,onSelect:()=>{n.setValue("postID",o.postID,{shouldValidate:!0}),O(!1),P("")},children:[e.jsx(at,{className:B("mr-2 h-4 w-4",r.value===o.postID?"opacity-100":"opacity-0")}),o.title]},o.postID))})})]})})]}),e.jsx(h,{className:"col-start-2"})]})}),e.jsx(m,{control:n.control,name:"image",render:({field:r})=>e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-center gap-4 space-y-0",children:[e.jsx(g,{className:"text-right",children:a("features.operation.advertising.form.image")}),e.jsx(x,{children:e.jsx("button",{type:"button",onClick:()=>I(!0),className:B("flex flex-col items-center justify-center h-20 w-20 rounded-lg border-2 border-dashed border-border bg-muted/30 overflow-hidden transition-all shrink-0","cursor-pointer hover:border-primary/50 hover:bg-muted/50"),children:r.value?e.jsx("img",{src:r.value,alt:"",className:"h-full w-full object-cover"}):e.jsxs(e.Fragment,{children:[e.jsx(it,{className:"h-8 w-8 text-muted-foreground mb-1"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a("features.operation.advertising.form.selectImage")})]})})}),e.jsx(h,{className:"col-start-2"})]})}),e.jsx(m,{control:n.control,name:"video",render:({field:r})=>e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-center gap-4 space-y-0",children:[e.jsx(g,{className:"text-right",children:a("features.operation.advertising.form.video")}),e.jsx(x,{children:e.jsx("button",{type:"button",onClick:()=>f(!0),className:B("flex flex-col items-center justify-center h-20 w-20 rounded-lg border-2 border-dashed border-border bg-muted/30 overflow-hidden transition-all shrink-0","cursor-pointer hover:border-primary/50 hover:bg-muted/50"),children:r.value?e.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center bg-muted/30 p-1",children:[e.jsx(me,{className:"h-8 w-8 text-muted-foreground mb-1 shrink-0"}),e.jsx("span",{className:"text-xs text-muted-foreground truncate w-full text-center",children:r.value.split("/").pop()})]}):e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-8 w-8 text-muted-foreground mb-1"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a("features.operation.advertising.form.selectVideo")})]})})}),e.jsx(h,{className:"col-start-2"})]})}),e.jsx(m,{control:n.control,name:"ext",render:({field:r})=>e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-start gap-4 space-y-0",children:[e.jsx(g,{className:"text-right pt-2",children:a("features.operation.advertising.form.ext")}),e.jsx(x,{children:e.jsx(de,{placeholder:a("features.operation.advertising.form.extPlaceholder"),className:"min-h-[80px] resize-none",...r})}),e.jsx(h,{className:"col-start-2"})]})}),e.jsx(m,{control:n.control,name:"sort",render:({field:r})=>e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-center gap-4 space-y-0",children:[e.jsx(g,{className:"text-right",children:a("features.operation.advertising.form.sort")}),e.jsx(x,{children:e.jsx($,{type:"number",min:1,placeholder:a("features.operation.advertising.form.sortPlaceholder"),value:r.value??"",onChange:o=>r.onChange(Number(o.target.value))})}),e.jsx(h,{className:"col-start-2"})]})}),e.jsx(m,{control:n.control,name:"status",render:({field:r})=>e.jsxs(p,{className:"grid grid-cols-[140px_1fr] items-center gap-4 space-y-0",children:[e.jsx(g,{className:"text-right",children:a("features.operation.advertising.form.status")}),e.jsxs(Q,{onValueChange:o=>r.onChange(Number(o)),value:r.value?String(r.value):"1",children:[e.jsx(x,{children:e.jsx(G,{children:e.jsx(U,{})})}),e.jsxs(J,{children:[e.jsx(S,{value:"1",children:a("features.operation.advertising.advertising.status.unpublished")}),e.jsx(S,{value:"2",children:a("features.operation.advertising.advertising.status.published")})]})]}),e.jsx(h,{className:"col-start-2"})]})}),e.jsxs(Qe,{className:"shrink-0",children:[e.jsx(V,{type:"button",variant:"outline",onClick:()=>c(!1),disabled:D,children:a("features.operation.advertising.form.cancel")}),e.jsx(V,{type:"submit",disabled:D,children:D?"...":a("features.operation.advertising.form.submit")})]})]})})]}),e.jsx(ue,{open:Y,onOpenChange:I,onSelect:r=>{n.setValue("image",r.url,{shouldValidate:!0}),I(!1)},type:pe.IMAGE,title:a("features.operation.advertising.form.selectImageDialogTitle"),description:a("features.operation.advertising.form.selectImageDialogDesc")}),e.jsx(ue,{open:X,onOpenChange:f,onSelect:r=>{n.setValue("video",r.url,{shouldValidate:!0}),f(!1)},type:pe.VIDEO,title:a("features.operation.advertising.form.selectVideoDialogTitle"),description:a("features.operation.advertising.form.selectVideoDialogDesc")})]})}async function lt(t){const c={pageNum:t?.pageNum??1,pageSize:t?.pageSize??10};return t?.sceneID!=null&&t.sceneID!==""&&(c.sceneID=t.sceneID),t?.title!=null&&t.title!==""&&(c.title=t.title),t?.status!=null&&t.status!==""&&(c.status=t.status),await W.get("/api/ad",{params:c})}async function ct(t,c){const v={title:t.title,description:t.description,sceneID:t.sceneID,url:t.url,urlType:t.urlType,image:t.image,Sort:t.sort,Status:t.status,ext:t.ext};return t.video&&(v.video=t.video),await W.post("/api/ad",v,{params:void 0})??{}}async function dt(t,c){const y=t.trim();await W.patch(`/api/ad/${y}`,c)}async function ut(t){await W.delete("/api/ad",{data:{adsIds:t.trim()}})}function mt(t){return{id:(t.adID??"").trim(),title:(t.title??"").trim()||"-",description:(t.description??"").trim()||"-",status:t.status??1,createdAt:t.createdAt?.trim()||"-"}}function pt(){"use no memo";const{t}=ge(),c=je(),[y,v]=d.useState(!1),[D,C]=d.useState(null),[l,a]=d.useState(null),[j,Y]=d.useState("__all__"),[I,X]=d.useState([]),[f,z]=d.useState({pageIndex:0,pageSize:10}),[O,F]=d.useState([]),[P,Z]=d.useState({}),{data:n}=re({queryKey:["adSceneList",{pageNum:1,pageSize:1e3}],queryFn:()=>Le({pageNum:1,pageSize:1e3})}),R=d.useMemo(()=>n?.adScenes?.map(s=>({adSceneID:s.adSceneID,title:s.title??s.adSceneID}))??[],[n?.adScenes]),E=d.useMemo(()=>{const s=i=>{const N=I.find(M=>M.id===i);return N?.value&&Array.isArray(N.value)?N.value[0]||"":N?.value||""};return{pageNum:f.pageIndex+1,pageSize:f.pageSize,sceneID:j&&j!=="__all__"&&j.trim()||void 0,title:s("title")||void 0,status:s("status")||void 0}},[f.pageIndex,f.pageSize,j,I]),{data:K,isLoading:L,error:ee}=re({queryKey:["adList",E],queryFn:()=>lt(E)}),r=K?.ads??[],o=d.useMemo(()=>r.map(s=>mt(s)),[r]),T=K?.total??0,u=D!=null?r.find(s=>(s.adID??"").trim()===D)??null:null,ae=se({mutationFn:s=>ct(s),onSuccess:()=>{_.success(t("features.operation.advertising.createSuccess")),c.invalidateQueries({queryKey:["adList"]}),v(!1)},onError:s=>{_.error(s instanceof Error?s.message:t("features.operation.advertising.createError"))}}),ie=se({mutationFn:({adID:s,data:i})=>dt(s,i),onSuccess:()=>{_.success(t("features.operation.advertising.updateSuccess")),c.invalidateQueries({queryKey:["adList"]}),C(null)},onError:s=>{_.error(s instanceof Error?s.message:t("features.operation.advertising.updateError"))}}),oe=se({mutationFn:s=>ut(s),onSuccess:()=>{_.success(t("features.operation.advertising.deleteSuccess")),c.invalidateQueries({queryKey:["adList"]}),a(null)},onError:s=>{_.error(s instanceof Error?s.message:t("features.operation.advertising.deleteError"))}}),xe=()=>{l&&oe.mutate(l)},he=o.find(s=>s.id===l),fe=Math.max(1,Math.ceil(T/f.pageSize)),A=d.useMemo(()=>[{accessorKey:"id",header:({column:s})=>e.jsx(q,{column:s,title:t("features.operation.advertising.advertising.columns.id")}),cell:({row:s})=>e.jsx("div",{className:"font-mono text-muted-foreground",children:s.getValue("id")?.trim()??"-"})},{accessorKey:"title",header:({column:s})=>e.jsx(q,{column:s,title:t("features.operation.advertising.advertising.columns.title")}),cell:({row:s})=>e.jsx("div",{className:"max-w-[160px] truncate font-medium",title:s.getValue("title"),children:s.getValue("title")??"-"})},{accessorKey:"description",header:({column:s})=>e.jsx(q,{column:s,title:t("features.operation.advertising.advertising.columns.description")}),cell:({row:s})=>{const i=s.getValue("description");return e.jsx("div",{className:"max-w-[280px] truncate text-muted-foreground",title:i,children:i??"-"})}},{accessorKey:"status",header:({column:s})=>e.jsx(q,{column:s,title:t("features.operation.advertising.advertising.columns.status")}),cell:({row:s})=>{const i=s.getValue("status");return e.jsx(Te,{variant:we(i,"publishStatus"),children:t(i===2?"features.operation.advertising.advertising.status.published":"features.operation.advertising.advertising.status.unpublished")})}},{accessorKey:"createdAt",header:({column:s})=>e.jsx(q,{column:s,title:t("features.operation.advertising.advertising.columns.createdAt")}),cell:({row:s})=>e.jsx("div",{className:"text-muted-foreground whitespace-nowrap",children:s.getValue("createdAt")??"-"})},{id:"actions",header:t("features.operation.advertising.advertising.columns.actions"),cell:({row:s})=>{const i=s.original;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ne,{children:[e.jsx(le,{asChild:!0,children:e.jsx(V,{variant:"ghost",size:"sm",onClick:()=>C(i.id),children:e.jsx(ye,{className:"h-4 w-4"})})}),e.jsx(ce,{children:t("features.operation.advertising.advertising.actions.edit")})]}),e.jsxs(ne,{children:[e.jsx(le,{asChild:!0,children:e.jsx(V,{variant:"ghost",size:"sm",onClick:()=>a(i.id),children:e.jsx(De,{className:"h-4 w-4 text-destructive"})})}),e.jsx(ce,{children:t("features.operation.advertising.advertising.actions.delete")})]})]})},enableHiding:!1,meta:{thClassName:"sticky right-0 bg-background z-10 shadow-[inset_-1px_0_0_0_hsl(var(--border))]",tdClassName:"sticky right-0 bg-background z-10 shadow-[inset_-1px_0_0_0_hsl(var(--border))]"}}],[t]),w=Ne({data:o,columns:A,getCoreRowModel:Se(),getSortedRowModel:be(),manualPagination:!0,pageCount:fe,getRowId:s=>s.id,onSortingChange:F,onColumnFiltersChange:X,onColumnVisibilityChange:Z,onPaginationChange:z,state:{sorting:O,columnFilters:I,columnVisibility:P,pagination:f}});return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between px-4 pt-4",children:e.jsx(Ie,{title:t("features.operation.advertising.title"),description:t("features.operation.advertising.description"),children:e.jsxs(V,{onClick:()=>{C(null),v(!0)},children:[e.jsx(Ce,{className:"h-4 w-4"}),t("features.operation.advertising.advertising.createButton")]})})}),e.jsxs("div",{className:"rounded-md border p-6 mx-4",children:[e.jsx("div",{className:"space-y-2 pb-4",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(Q,{value:j,onValueChange:Y,children:[e.jsx(G,{className:"h-8 w-[160px]",children:e.jsx(U,{placeholder:t("features.operation.advertising.advertising.search.scene")})}),e.jsxs(J,{children:[e.jsx(S,{value:"__all__",children:t("features.operation.advertising.advertising.search.sceneAll")}),R.map(s=>e.jsx(S,{value:(s.adSceneID??"").trim(),children:s.title},s.adSceneID))]})]}),e.jsx($,{type:"text",placeholder:t("features.operation.advertising.advertising.search.titlePlaceholder"),value:w.getColumn("title")?.getFilterValue()??"",onChange:s=>w.getColumn("title")?.setFilterValue(s.target.value),className:"h-8 w-[200px]"}),e.jsx(Ee,{column:w.getColumn("status"),title:t("features.operation.advertising.advertising.search.status"),options:[{label:t("features.operation.advertising.advertising.status.unpublished"),value:"1"},{label:t("features.operation.advertising.advertising.status.published"),value:"2"}],single:!0})]})}),e.jsxs(_e,{children:[e.jsx(Ve,{children:w.getHeaderGroups().map(s=>e.jsx(k,{children:s.headers.map(i=>{const N=i.isPlaceholder?null:typeof i.column.columnDef.header=="function"?i.column.columnDef.header(i.getContext()):i.column.columnDef.header,M=i.column.columnDef.meta;return e.jsx(Fe,{className:M?.thClassName,children:N},i.id)})},s.id))}),e.jsx(Pe,{children:L?e.jsx(k,{children:e.jsx(H,{colSpan:A.length,className:"h-24 text-center",children:t("features.operation.advertising.advertising.loading")})}):ee?e.jsx(k,{children:e.jsx(H,{colSpan:A.length,className:"h-24 text-center text-destructive",children:t("features.operation.advertising.advertising.loadError")})}):w.getRowModel().rows?.length?w.getRowModel().rows.map(s=>e.jsx(k,{children:s.getVisibleCells().map(i=>{const N=typeof i.column.columnDef.cell=="function"?i.column.columnDef.cell(i.getContext()):i.column.columnDef.cell,M=i.column.columnDef.meta;return e.jsx(H,{className:M?.tdClassName,children:N},i.id)})},s.id)):e.jsx(k,{children:e.jsx(H,{colSpan:A.length,className:"h-24 text-center",children:t("features.operation.advertising.advertising.noData")})})})]}),e.jsx(Re,{table:w})]}),e.jsx(nt,{open:y||D!=null&&u!=null,onOpenChange:s=>{s||(v(!1),C(null))},onSubmit:s=>ae.mutate(s),onSubmitUpdate:(s,i)=>ie.mutate({adID:s,data:i}),isLoading:ae.isPending||ie.isPending,sceneList:R,editAd:u}),e.jsx(Me,{open:l!==null,onOpenChange:s=>{s||a(null)},title:t("features.operation.advertising.confirmDelete"),desc:t("features.operation.advertising.confirmDeleteDesc",{name:he?.title??l??""}),handleConfirm:xe,destructive:!0,confirmText:t("features.operation.advertising.advertising.actions.delete"),isLoading:oe.isPending})]})}const ts=pt;export{ts as component};
