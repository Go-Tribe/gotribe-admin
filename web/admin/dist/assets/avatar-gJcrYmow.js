import{r as i,j as l,a1 as R,f as S}from"./index-Pe1Nv6hH.js";import{g as N,d as g}from"./index-SpxnGYUf.js";import{P as A}from"./index-DGhUbGt9.js";function P(e,a=[]){let n=[];function c(t,s){const r=i.createContext(s);r.displayName=t+"Context";const u=n.length;n=[...n,s];const d=f=>{const{scope:p,children:x,...m}=f,I=p?.[e]?.[u]||r,y=i.useMemo(()=>m,Object.values(m));return l.jsx(I.Provider,{value:y,children:x})};d.displayName=t+"Provider";function v(f,p){const x=p?.[e]?.[u]||r,m=i.useContext(x);if(m)return m;if(s!==void 0)return s;throw new Error(`\`${f}\` must be used within \`${t}\``)}return[d,v]}const o=()=>{const t=n.map(s=>i.createContext(s));return function(r){const u=r?.[e]||t;return i.useMemo(()=>({[`__scope${e}`]:{...r,[e]:u}}),[r,u])}};return o.scopeName=e,[c,k(o,...a)]}function k(...e){const a=e[0];if(e.length===1)return a;const n=()=>{const c=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(t){const s=c.reduce((r,{useScope:u,scopeName:d})=>{const f=u(t)[`__scope${d}`];return{...r,...f}},{});return i.useMemo(()=>({[`__scope${a.scopeName}`]:s}),[s])}};return n.scopeName=a.scopeName,n}function M(){return R.useSyncExternalStore($,()=>!0,()=>!1)}function $(){return()=>{}}var L="Avatar",[F]=P(L),[z,h]=F(L),E=i.forwardRef((e,a)=>{const{__scopeAvatar:n,...c}=e,[o,t]=i.useState("idle");return l.jsx(z,{scope:n,imageLoadingStatus:o,onImageLoadingStatusChange:t,children:l.jsx(A.span,{...c,ref:a})})});E.displayName=L;var _="AvatarImage",b=i.forwardRef((e,a)=>{const{__scopeAvatar:n,src:c,onLoadingStatusChange:o=()=>{},...t}=e,s=h(_,n),r=H(c,t),u=N(d=>{o(d),s.onImageLoadingStatusChange(d)});return g(()=>{r!=="idle"&&u(r)},[r,u]),r==="loaded"?l.jsx(A.img,{...t,ref:a,src:c}):null});b.displayName=_;var w="AvatarFallback",j=i.forwardRef((e,a)=>{const{__scopeAvatar:n,delayMs:c,...o}=e,t=h(w,n),[s,r]=i.useState(c===void 0);return i.useEffect(()=>{if(c!==void 0){const u=window.setTimeout(()=>r(!0),c);return()=>window.clearTimeout(u)}},[c]),s&&t.imageLoadingStatus!=="loaded"?l.jsx(A.span,{...o,ref:a}):null});j.displayName=w;function C(e,a){return e?a?(e.src!==a&&(e.src=a),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function H(e,{referrerPolicy:a,crossOrigin:n}){const c=M(),o=i.useRef(null),t=c?(o.current||(o.current=new window.Image),o.current):null,[s,r]=i.useState(()=>C(t,e));return g(()=>{r(C(t,e))},[t,e]),g(()=>{const u=f=>()=>{r(f)};if(!t)return;const d=u("loaded"),v=u("error");return t.addEventListener("load",d),t.addEventListener("error",v),a&&(t.referrerPolicy=a),typeof n=="string"&&(t.crossOrigin=n),()=>{t.removeEventListener("load",d),t.removeEventListener("error",v)}},[t,n,a]),s}var T=E,B=b,q=j;function W({className:e,...a}){return l.jsx(T,{"data-slot":"avatar",className:S("relative flex size-8 shrink-0 overflow-hidden rounded-full",e),...a})}function D({className:e,...a}){return l.jsx(B,{"data-slot":"avatar-image",className:S("aspect-square size-full",e),...a})}function J({className:e,...a}){return l.jsx(q,{"data-slot":"avatar-fallback",className:S("flex size-full items-center justify-center rounded-full bg-muted",e),...a})}export{W as A,D as a,J as b};
