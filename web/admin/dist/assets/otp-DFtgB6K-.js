import{t as Re,j as a,r as t,f as Y,u as Ae,a as xe,A as De,C as Be,B as Ie,L as Le}from"./index-Pe1Nv6hH.js";import{A as We,C as _e,a as He,b as Ge,c as $e,d as ze,e as Ve,f as qe}from"./auth-brand-tSoSfpp-.js";import{u as Je,a as Ye,F as Ze,b as Ke,c as Qe,d as Ue,e as Xe,f as et}from"./form-DU65aaqX.js";import{M as tt}from"./minus-BV34uZJO.js";import"./useQuery-DDON36P9.js";import"./logo-7-bOXUaH.js";import"./config-Bb2IP3LG.js";import"./index-DGhUbGt9.js";import"./createLucideIcon-BU8aI1FG.js";function nt(e,r="You submitted the following values:"){Re.message(r,{description:a.jsx("pre",{className:"mt-2 w-full overflow-x-auto rounded-md bg-slate-950 p-4",children:a.jsx("code",{className:"text-white",children:JSON.stringify(e,null,2)})})})}var rt=Object.defineProperty,at=Object.defineProperties,ot=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,ve=(e,r,l)=>r in e?rt(e,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[r]=l,lt=(e,r)=>{for(var l in r||(r={}))be.call(r,l)&&ve(e,l,r[l]);if(Q)for(var l of Q(r))je.call(r,l)&&ve(e,l,r[l]);return e},it=(e,r)=>at(e,ot(r)),st=(e,r)=>{var l={};for(var u in e)be.call(e,u)&&r.indexOf(u)<0&&(l[u]=e[u]);if(e!=null&&Q)for(var u of Q(e))r.indexOf(u)<0&&je.call(e,u)&&(l[u]=e[u]);return l};function ut(e){let r=setTimeout(e,0),l=setTimeout(e,10),u=setTimeout(e,50);return[r,l,u]}function ct(e){let r=t.useRef();return t.useEffect(()=>{r.current=e}),r.current}var dt=18,we=40,pt=`${we}px`,mt=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function ft({containerRef:e,inputRef:r,pushPasswordManagerStrategy:l,isFocused:u}){let[h,i]=t.useState(!1),[C,v]=t.useState(!1),[M,O]=t.useState(!1),y=t.useMemo(()=>l==="none"?!1:(l==="increase-width"||l==="experimental-no-flickering")&&h&&C,[h,C,l]),I=t.useCallback(()=>{let g=e.current,k=r.current;if(!g||!k||M||l==="none")return;let j=g,E=j.getBoundingClientRect().left+j.offsetWidth,L=j.getBoundingClientRect().top+j.offsetHeight/2,c=E-dt,G=L;document.querySelectorAll(mt).length===0&&document.elementFromPoint(c,G)===g||(i(!0),O(!0))},[e,r,M,l]);return t.useEffect(()=>{let g=e.current;if(!g||l==="none")return;function k(){let E=window.innerWidth-g.getBoundingClientRect().right;v(E>=we)}k();let j=setInterval(k,1e3);return()=>{clearInterval(j)}},[e,l]),t.useEffect(()=>{let g=u||document.activeElement===r.current;if(l==="none"||!g)return;let k=setTimeout(I,0),j=setTimeout(I,2e3),E=setTimeout(I,5e3),L=setTimeout(()=>{O(!0)},6e3);return()=>{clearTimeout(k),clearTimeout(j),clearTimeout(E),clearTimeout(L)}},[r,u,l,I]),{hasPWMBadge:h,willPushPWMBadge:y,PWM_BADGE_SPACE_WIDTH:pt}}var Se=t.createContext({}),Ce=t.forwardRef((e,r)=>{var l=e,{value:u,onChange:h,maxLength:i,textAlign:C="left",pattern:v,placeholder:M,inputMode:O="numeric",onComplete:y,pushPasswordManagerStrategy:I="increase-width",pasteTransformer:g,containerClassName:k,noScriptCSSFallback:j=ht,render:E,children:L}=l,c=st(l,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),G,ae,oe,le,ie;let[ye,Ee]=t.useState(typeof c.defaultValue=="string"?c.defaultValue:""),d=u??ye,F=ct(d),$=t.useCallback(n=>{h?.(n),Ee(n)},[h]),S=t.useMemo(()=>v?typeof v=="string"?new RegExp(v):v:null,[v]),p=t.useRef(null),U=t.useRef(null),X=t.useRef({value:d,onChange:$,isIOS:typeof window<"u"&&((ae=(G=window?.CSS)==null?void 0:G.supports)==null?void 0:ae.call(G,"-webkit-touch-callout","none"))}),Z=t.useRef({prev:[(oe=p.current)==null?void 0:oe.selectionStart,(le=p.current)==null?void 0:le.selectionEnd,(ie=p.current)==null?void 0:ie.selectionDirection]});t.useImperativeHandle(r,()=>p.current,[]),t.useEffect(()=>{let n=p.current,o=U.current;if(!n||!o)return;X.current.value!==n.value&&X.current.onChange(n.value),Z.current.prev=[n.selectionStart,n.selectionEnd,n.selectionDirection];function m(){if(document.activeElement!==n){V(null),q(null);return}let s=n.selectionStart,f=n.selectionEnd,K=n.selectionDirection,w=n.maxLength,A=n.value,P=Z.current.prev,T=-1,N=-1,D;if(A.length!==0&&s!==null&&f!==null){let Ne=s===f,Oe=s===A.length&&A.length<w;if(Ne&&!Oe){let B=s;if(B===0)T=0,N=1,D="forward";else if(B===w)T=B-1,N=B,D="backward";else if(w>1&&A.length>1){let ne=0;if(P[0]!==null&&P[1]!==null){D=B<P[1]?"backward":"forward";let Fe=P[0]===P[1]&&P[0]<w;D==="backward"&&!Fe&&(ne=-1)}T=ne+B,N=ne+B+1}}T!==-1&&N!==-1&&T!==N&&p.current.setSelectionRange(T,N,D)}let fe=T!==-1?T:s,he=N!==-1?N:f,Te=D??K;V(fe),q(he),Z.current.prev=[fe,he,Te]}if(document.addEventListener("selectionchange",m,{capture:!0}),m(),document.activeElement===n&&ee(!0),!document.getElementById("input-otp-style")){let s=document.createElement("style");if(s.id="input-otp-style",document.head.appendChild(s),s.sheet){let f="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";J(s.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),J(s.sheet,`[data-input-otp]:autofill { ${f} }`),J(s.sheet,`[data-input-otp]:-webkit-autofill { ${f} }`),J(s.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),J(s.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let x=()=>{o&&o.style.setProperty("--root-height",`${n.clientHeight}px`)};x();let b=new ResizeObserver(x);return b.observe(n),()=>{document.removeEventListener("selectionchange",m,{capture:!0}),b.disconnect()}},[]);let[se,ue]=t.useState(!1),[z,ee]=t.useState(!1),[R,V]=t.useState(null),[W,q]=t.useState(null);t.useEffect(()=>{ut(()=>{var n,o,m,x;(n=p.current)==null||n.dispatchEvent(new Event("input"));let b=(o=p.current)==null?void 0:o.selectionStart,s=(m=p.current)==null?void 0:m.selectionEnd,f=(x=p.current)==null?void 0:x.selectionDirection;b!==null&&s!==null&&(V(b),q(s),Z.current.prev=[b,s,f])})},[d,z]),t.useEffect(()=>{F!==void 0&&d!==F&&F.length<i&&d.length===i&&y?.(d)},[i,y,F,d]);let _=ft({containerRef:U,inputRef:p,pushPasswordManagerStrategy:I,isFocused:z}),ce=t.useCallback(n=>{let o=n.currentTarget.value.slice(0,i);if(o.length>0&&S&&!S.test(o)){n.preventDefault();return}typeof F=="string"&&o.length<F.length&&document.dispatchEvent(new Event("selectionchange")),$(o)},[i,$,F,S]),de=t.useCallback(()=>{var n;if(p.current){let o=Math.min(p.current.value.length,i-1),m=p.current.value.length;(n=p.current)==null||n.setSelectionRange(o,m),V(o),q(m)}ee(!0)},[i]),pe=t.useCallback(n=>{var o,m;let x=p.current;if(!g&&(!X.current.isIOS||!n.clipboardData||!x))return;let b=n.clipboardData.getData("text/plain"),s=g?g(b):b;n.preventDefault();let f=(o=p.current)==null?void 0:o.selectionStart,K=(m=p.current)==null?void 0:m.selectionEnd,w=(f!==K?d.slice(0,f)+s+d.slice(K):d.slice(0,f)+s+d.slice(f)).slice(0,i);if(w.length>0&&S&&!S.test(w))return;x.value=w,$(w);let A=Math.min(w.length,i-1),P=w.length;x.setSelectionRange(A,P),V(A),q(P)},[i,$,S,d]),Pe=t.useMemo(()=>({position:"relative",cursor:c.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[c.disabled]),me=t.useMemo(()=>({position:"absolute",inset:0,width:_.willPushPWMBadge?`calc(100% + ${_.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:_.willPushPWMBadge?`inset(0 ${_.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:C,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[_.PWM_BADGE_SPACE_WIDTH,_.willPushPWMBadge,C]),Me=t.useMemo(()=>t.createElement("input",it(lt({autoComplete:c.autoComplete||"one-time-code"},c),{"data-input-otp":!0,"data-input-otp-placeholder-shown":d.length===0||void 0,"data-input-otp-mss":R,"data-input-otp-mse":W,inputMode:O,pattern:S?.source,"aria-placeholder":M,style:me,maxLength:i,value:d,ref:p,onPaste:n=>{var o;pe(n),(o=c.onPaste)==null||o.call(c,n)},onChange:ce,onMouseOver:n=>{var o;ue(!0),(o=c.onMouseOver)==null||o.call(c,n)},onMouseLeave:n=>{var o;ue(!1),(o=c.onMouseLeave)==null||o.call(c,n)},onFocus:n=>{var o;de(),(o=c.onFocus)==null||o.call(c,n)},onBlur:n=>{var o;ee(!1),(o=c.onBlur)==null||o.call(c,n)}})),[ce,de,pe,O,me,i,W,R,c,S?.source,d]),te=t.useMemo(()=>({slots:Array.from({length:i}).map((n,o)=>{var m;let x=z&&R!==null&&W!==null&&(R===W&&o===R||o>=R&&o<W),b=d[o]!==void 0?d[o]:null,s=d[0]!==void 0?null:(m=M?.[o])!=null?m:null;return{char:b,placeholderChar:s,isActive:x,hasFakeCaret:x&&b===null}}),isFocused:z,isHovering:!c.disabled&&se}),[z,se,i,W,R,c.disabled,d]),ke=t.useMemo(()=>E?E(te):t.createElement(Se.Provider,{value:te},L),[L,te,E]);return t.createElement(t.Fragment,null,j!==null&&t.createElement("noscript",null,t.createElement("style",null,j)),t.createElement("div",{ref:U,"data-input-otp-container":!0,style:Pe,className:k},ke,t.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},Me)))});Ce.displayName="Input";function J(e,r){try{e.insertRule(r)}catch{console.error("input-otp could not insert CSS rule:",r)}}var ht=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;function vt({className:e,containerClassName:r,...l}){return a.jsx(Ce,{"data-slot":"input-otp",containerClassName:Y("flex items-center gap-2 has-disabled:opacity-50",r),className:Y("disabled:cursor-not-allowed",e),...l})}function re({className:e,...r}){return a.jsx("div",{"data-slot":"input-otp-group",className:Y("flex items-center",e),...r})}function H({index:e,className:r,...l}){const u=t.useContext(Se),{char:h,hasFakeCaret:i,isActive:C}=u?.slots[e]??{};return a.jsxs("div",{"data-slot":"input-otp-slot","data-active":C,className:Y("relative flex h-9 w-9 items-center justify-center border-y border-r border-input text-sm shadow-xs transition-all outline-none first:rounded-l-md first:border-l last:rounded-r-md aria-invalid:border-destructive data-[active=true]:z-10 data-[active=true]:border-ring data-[active=true]:ring-[3px] data-[active=true]:ring-ring/50 data-[active=true]:aria-invalid:border-destructive data-[active=true]:aria-invalid:ring-destructive/20 dark:bg-input/30 dark:data-[active=true]:aria-invalid:ring-destructive/40",r),...l,children:[h,i&&a.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"h-4 w-px animate-caret-blink bg-foreground duration-1000"})})]})}function ge({...e}){return a.jsx("div",{"data-slot":"input-otp-separator",role:"separator",...e,children:a.jsx(tt,{})})}function gt({className:e,...r}){const l=Ae(),[u,h]=t.useState(!1),{t:i}=xe(),C=De({otp:Be().min(6,i("features.auth.otp.validation.otpLength")).max(6,i("features.auth.otp.validation.otpLength"))}),v=Je({resolver:Ye(C),defaultValues:{otp:""}}),M=v.watch("otp");function O(y){h(!0),nt(y),setTimeout(()=>{h(!1),l({to:"/"})},1e3)}return a.jsx(Ze,{...v,children:a.jsxs("form",{onSubmit:v.handleSubmit(O),className:Y("grid gap-2",e),...r,children:[a.jsx(Ke,{control:v.control,name:"otp",render:({field:y})=>a.jsxs(Qe,{children:[a.jsx(Ue,{className:"sr-only",children:i("features.auth.otp.otpLabel")}),a.jsx(Xe,{children:a.jsxs(vt,{maxLength:6,...y,containerClassName:'justify-between sm:[&>[data-slot="input-otp-group"]>div]:w-12',children:[a.jsxs(re,{children:[a.jsx(H,{index:0}),a.jsx(H,{index:1})]}),a.jsx(ge,{}),a.jsxs(re,{children:[a.jsx(H,{index:2}),a.jsx(H,{index:3})]}),a.jsx(ge,{}),a.jsxs(re,{children:[a.jsx(H,{index:4}),a.jsx(H,{index:5})]})]})}),a.jsx(et,{})]})}),a.jsx(Ie,{className:"mt-2",disabled:M.length<6||u,children:i("features.auth.otp.verify")})]})})}function xt(){const{t:e}=xe();return a.jsx(We,{children:a.jsxs(_e,{className:"w-full border shadow-sm",children:[a.jsxs(He,{className:"pb-4 pt-6",children:[a.jsx(Ge,{}),a.jsxs("div",{className:"space-y-1.5 border-t pt-5",children:[a.jsx($e,{className:"text-base font-medium",children:e("features.auth.otp.title")}),a.jsx(ze,{children:e("features.auth.otp.description")})]})]}),a.jsx(Ve,{children:a.jsx(gt,{})}),a.jsx(qe,{className:"border-t pt-6",children:a.jsxs("p",{className:"w-full text-center text-sm text-muted-foreground",children:[e("features.auth.otp.footerText")," ",a.jsx(Le,{to:"/sign-in",className:"underline underline-offset-4 hover:text-primary",children:e("features.auth.otp.resendLink")}),"."]})})]})})}const kt=xt;export{kt as component};
