import{m as c}from"./index-Pe1Nv6hH.js";function n(e){const t=(e.url??"").replace(/\/+$/,""),a=(e.path??"").replace(/^\/+/,""),r=a?`${t}/${a}`:t||"";return{id:(e.resourceID??"").trim(),url:r,name:(e.title??"").trim(),type:e.fileType??0,size:e.size,createdAt:e.createdAt}}async function i(e){const t={};e?.type!=null&&e.type!==0&&(t.type=e.type),e?.pageNum!=null&&(t.pageNum=e.pageNum),e?.pageSize!=null&&(t.pageSize=e.pageSize);const a=await c.get("/api/resource",{params:t}),r=a?.resources??[],o=a?.total??0;return{list:r.map(n),total:o}}async function p(e,t,a){const r=new FormData;r.append("file",e),r.append("type",t.toString());const o=await c.upload("/api/resource/upload",r,u=>{u.total&&a&&a(Math.round(u.loaded*100/u.total))});return"resourceID"in o&&o.resourceID!=null?n(o):o}async function l(e){const t=await c.get(`/api/resource/${e.trim()}`),a=t.resource??t;if(!a?.resourceID)throw new Error("资源不存在");return a}async function d(e,t){await c.patch(`/api/resource/${e.trim()}`,t)}async function f(e){await c.delete("/api/resource",{data:{resourceID:e}})}const y={IMAGE:1,VIDEO:2,AUDIO:3,ARCHIVE:4,DOCUMENT:5,FONT:6,APP:7,UNKNOWN:8};export{y as F,d as a,l as b,f as d,i as g,p as u};
